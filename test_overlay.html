<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¬è©¦è¦†è“‹å±¤</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div class="container mt-5">
        <h1>æ¸¬è©¦è¨“ç·´è¦†è“‹å±¤</h1>
        <button class="btn btn-primary btn-lg" onclick="showTrainingOverlay()">é¡¯ç¤ºè¨“ç·´è¦†è“‹å±¤</button>
        <button class="btn btn-secondary btn-lg ms-2" onclick="hideTrainingOverlay()">éš±è—è¦†è“‹å±¤</button>
        <button class="btn btn-danger btn-lg ms-2" onclick="removeTrainingOverlay()">ç§»é™¤è¦†è“‹å±¤</button>
    </div>

    <script>
        // é¡¯ç¤ºå…¨å±è¨“ç·´ä¸­è¦†è“‹å±¤
        function showTrainingOverlay() {
            console.log('ğŸ¯ showTrainingOverlay() è¢«èª¿ç”¨');

            // ç§»é™¤èˆŠçš„è¦†è“‹å±¤ï¼ˆå¦‚æœå­˜åœ¨ï¼‰
            const oldOverlay = document.getElementById('trainingOverlay');
            if (oldOverlay) {
                console.log('ç§»é™¤èˆŠçš„è¦†è“‹å±¤');
                oldOverlay.remove();
            }

            // å‰µå»ºè¦†è“‹å±¤
            const overlay = document.createElement('div');
            overlay.id = 'trainingOverlay';
            overlay.style.cssText = `
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                background: rgba(0, 0, 0, 0.85) !important;
                z-index: 999999 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                backdrop-filter: blur(8px) !important;
                -webkit-backdrop-filter: blur(8px) !important;
            `;

            // å‰µå»ºå…§å®¹å®¹å™¨
            const content = document.createElement('div');
            content.style.cssText = `
                text-align: center;
                color: white;
                padding: 50px 60px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                border-radius: 20px;
                box-shadow: 0 20px 60px rgba(0,0,0,0.5);
                max-width: 700px;
                width: 90%;
                max-height: 90vh;
                overflow-y: auto;
                z-index: 1000000;
                position: relative;
            `;

            content.innerHTML = `
                <div class="spinner-border text-light mb-4" role="status" style="width: 5rem; height: 5rem;">
                    <span class="visually-hidden">è¨“ç·´ä¸­...</span>
                </div>
                <h3 class="text-white mb-4">ğŸš€ æ¨¡å‹è¨“ç·´é€²è¡Œä¸­</h3>

                <!-- è¨“ç·´é€²åº¦ -->
                <div class="mb-4">
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <span class="text-white-50">è¨“ç·´é€²åº¦</span>
                        <span class="text-white fw-bold" id="overlayEpochText">Epoch 25/100</span>
                    </div>
                    <div class="progress" style="height: 25px; background: rgba(255,255,255,0.2);">
                        <div id="overlayProgressBar" class="progress-bar progress-bar-striped progress-bar-animated"
                             role="progressbar" style="width: 25%; background: linear-gradient(90deg, #28a745, #20c997);">
                            <span id="overlayProgressText" class="fw-bold">25%</span>
                        </div>
                    </div>
                </div>

                <!-- è¨“ç·´è©³æƒ… -->
                <div class="row text-start mb-4">
                    <div class="col-6 mb-3">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-clock me-2" style="font-size: 1.5rem; opacity: 0.7;"></i>
                            <div>
                                <small class="text-white-50 d-block">å·²ç”¨æ™‚é–“</small>
                                <span class="text-white fw-bold" id="overlayElapsedTime">00:15:30</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-6 mb-3">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-hourglass-half me-2" style="font-size: 1.5rem; opacity: 0.7;"></i>
                            <div>
                                <small class="text-white-50 d-block">é è¨ˆå‰©é¤˜</small>
                                <span class="text-white fw-bold" id="overlayRemainingTime">ç´„ 45 åˆ†é˜</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-chart-line me-2" style="font-size: 1.5rem; opacity: 0.7;"></i>
                            <div>
                                <small class="text-white-50 d-block">ç•¶å‰æå¤±</small>
                                <span class="text-white fw-bold" id="overlayLoss">0.3542</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="d-flex align-items-center">
                            <i class="fas fa-bullseye me-2" style="font-size: 1.5rem; opacity: 0.7;"></i>
                            <div>
                                <small class="text-white-50 d-block">æº–ç¢ºç‡</small>
                                <span class="text-white fw-bold" id="overlayAccuracy">87.5%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ç•¶å‰ç‹€æ…‹ -->
                <div class="mb-4 p-3" style="background: rgba(255,255,255,0.1); border-radius: 10px;">
                    <small class="text-white-50 d-block mb-1">ç•¶å‰ç‹€æ…‹</small>
                    <div class="text-white" id="overlayStatus" style="font-size: 0.95rem;">æ­£åœ¨è¨“ç·´ç¬¬ 25 è¼ª (25%) - æ¨¡å‹æ­£åœ¨ç©©å®šæ”¶æ–‚ä¸­</div>
                </div>

                <!-- æœ€è¿‘æ—¥èªŒ -->
                <div class="mb-4 p-3 text-start" style="background: rgba(0,0,0,0.3); border-radius: 10px; max-height: 150px; overflow-y: auto;">
                    <small class="text-white-50 d-block mb-2">ğŸ“‹ æœ€è¿‘æ—¥èªŒ</small>
                    <div id="overlayRecentLogs" style="font-family: monospace; font-size: 0.85rem; color: #e0e0e0;">
                        <div style="margin-bottom: 4px; border-left: 2px solid rgba(255,255,255,0.3); padding-left: 8px;">ğŸ“ Epoch 25/100 (25%) | Loss: 0.3542</div>
                        <div style="margin-bottom: 4px; border-left: 2px solid rgba(255,255,255,0.3); padding-left: 8px;">âš¡ è¨“ç·´é€Ÿåº¦: 2.5s/epoch</div>
                        <div style="margin-bottom: 4px; border-left: 2px solid rgba(255,255,255,0.3); padding-left: 8px;">ğŸ’“ è¨“ç·´é‹è¡Œä¸­...</div>
                    </div>
                </div>

                <!-- æ“ä½œæŒ‰éˆ• -->
                <div class="d-flex gap-2 justify-content-center">
                    <button class="btn btn-outline-light btn-sm" onclick="hideTrainingOverlay()">
                        <i class="fas fa-eye-slash"></i> æœ€å°åŒ–
                    </button>
                    <button class="btn btn-outline-danger btn-sm" onclick="alert('åœæ­¢è¨“ç·´åŠŸèƒ½')">
                        <i class="fas fa-stop"></i> åœæ­¢è¨“ç·´
                    </button>
                </div>

                <div class="mt-3">
                    <small class="text-white-50">
                        <i class="fas fa-info-circle"></i> è¨“ç·´æœŸé–“è«‹å‹¿é—œé–‰é é¢
                    </small>
                </div>
            `;

            overlay.appendChild(content);
            document.body.appendChild(overlay);

            console.log('âœ… è¦†è“‹å±¤å·²æ·»åŠ åˆ° bodyï¼Œå…ƒç´ ID:', overlay.id);
            console.log('è¦†è“‹å±¤ z-index:', overlay.style.zIndex);
            console.log('è¦†è“‹å±¤ display:', overlay.style.display);

            // å¼·åˆ¶é¡¯ç¤º
            setTimeout(() => {
                const check = document.getElementById('trainingOverlay');
                if (check) {
                    console.log('âœ… ç¢ºèªè¦†è“‹å±¤å­˜åœ¨æ–¼ DOM ä¸­');
                } else {
                    console.error('âŒ è¦†è“‹å±¤æœªæ‰¾åˆ°ï¼');
                }
            }, 100);
        }

        // éš±è—è¨“ç·´è¦†è“‹å±¤ï¼ˆä½†ä¸åœæ­¢è¨“ç·´ï¼‰
        function hideTrainingOverlay() {
            const overlay = document.getElementById('trainingOverlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }

        // ç§»é™¤è¨“ç·´è¦†è“‹å±¤ï¼ˆè¨“ç·´çµæŸæ™‚ï¼‰
        function removeTrainingOverlay() {
            const overlay = document.getElementById('trainingOverlay');
            if (overlay) {
                overlay.remove();
            }
        }
    </script>
</body>
</html>